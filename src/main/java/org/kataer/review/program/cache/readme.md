### 缓存

#### 缓存淘汰策略

##### 1、FIFO

```text
First In First Out
先进先出策略，最旧的缓存被淘汰
需要访问最新的数据使用该策略
```

##### 2、LRU

```text
Least Recently Used
最近最久未使用策略，优先淘汰最久未使用的数据
该策略可以保证缓存的都是热点数据
```

##### 3、LFU

```text
Least Frequently Used
最近最少使用策略
优先淘汰一段时间内使用次数最少的数据
```

#### 缓存问题

##### 1、缓存穿透

```text
请求某些不存在的数据导致穿透缓存
1、不存在的数据缓存空数据
2、对请求进行过滤
```

##### 2、缓存雪崩

```text
缓存大量失效或缓存未加载到内存，导致大量请求穿透换缓存
```

##### 3、缓存一致性

```text
todo 如何保证缓存一致性
```

#### 数据分布

##### 1、哈希分布

```text
数据计算hash值后，按hash值分布到不同的节点上
缺点时节点数量变化时，缓存需要重新分布(一致性hash来解决该问题)
```

##### 2、顺序分布

```text
有序分布
可以保留原有的数据顺序，更加充分的利用缓存
```

#### 一致性hash

##### 原理

```text
Distributed Hash Table（DHT）克服传统hash分布在服务器节点变化时的大量数据迁移
将hash空间看成环，每个对象计算hash后，放在顺时针第一个大于等于该hash值的节点上
增加或删除只会影响顺时针后一个节点
```